################################################################################

### Doc Status: WIP

# Standards

- /package
- /env
- /command


# DJB System

status: draft

we have designed airstack so that it's a configure-once, run-anywhere system. So if your program runs in airstack locally, our goal is for it to run unmodified in lxc containers, docker containers, vm's or any posix-compatible unix system.

Fundamentally, many of the ideas we are implementing come from ideas proposed originally by dj bernstein and implemented/improved by others. some of the ideas are:

- slashpackage
- slashdocs
- slashcommand
- slashfs
- publicfile
- runit process manager (inspired by djb's daemontools)

djb tools:
- http://slackmatic.guinix.com/ports-djb/

slashpackage:
- http://code.dogmap.org/fs/
- http://cr.yp.to/slashpackage.html
- http://www.superscript.com/build/develop.html

slashdocs:
- http://cr.yp.to/slashdoc.html

slashcommand:
- http://cr.yp.to/slashcommand.html

publicfile:
- http://cr.yp.to/publicfile.html

runit process manager:
- http://cmrg.fifthhorseman.net/wiki/runit

misc:
- http://thedjbway.b0llix.net/future.html
- http://cr.yp.to/djbdns/ipv6mess.html
- http://cr.yp.to/slash.html


<!-- ## examples -->

<!-- slashpackage:

/package/
        /runit/
              /src
              /doc
              /package
 -->


# Packages

TL;DR:
- Install new packages to /packages
- Install symlinks to /usr/local/bin so it is in user paths and doesn't require shell env modifications
- atomic upgrades and updates by installing and then changing a symlink.
  - for example, the location /packages/serf/serf is a symlink to /packages/serf/serf-v0.4/serf
- Package 'database' uses the filesystem. no fanciness needed.
- To accomodate different distros, installation will be the same but the symlinks to /usr/local/bin may change according to the distro philosophy.
- consistent philosophy, but this also integrates correctly with current system tools.
- TODO: would like to have pre-built binaries if possible.

Slashpackage philosophy:
- http://www.skarnet.org/software/skalibs/slashpackage.html
- http://cr.yp.to/slashpackage/management.html
- http://code.dogmap.org/slashpackage/notacon-2005/
- http://cr.yp.to/slashpackage/list.html
- http://code.dogmap.org/slashpackage/
- http://thedjbway.b0llix.net/future.html
- http://cr.yp.to/compatibility.html
- http://home.arcor.de/s.ka/sys/sp/remarks.html

on building packages:
- http://thedjbway.b0llix.net/builddjb.html#djbclassic

list of packages:
- http://code.dogmap.org/spftools/
- http://krue.net/slashpackage-foreign/
- http://code.dogmap.org/slashpackage-foreign/
- http://krue.net/slashpackage-foreign/

Additional readings:
- http://permalink.gmane.org/gmane.comp.djb.package/166
- http://comments.gmane.org/gmane.comp.djb.package/401
- http://www.encap.org/faq.html#Traditional
- http://www.toastball.net/toast/man
- http://www.superscript.com/build/develop.html

- http://thedjbway.b0llix.net/friends.html

"
Files generated by mkmed typically go in the package/ or conf-compile/ subdirectories. Some generated files go in src/.mkmed-data/.

Files generated by the automatically-generated build script typically go in subdirectories such as command/, conf/, include/, and library/. Intermediate files created by the build script go in compile/.
"

